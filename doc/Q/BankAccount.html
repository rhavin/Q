<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class Q::BankAccount - RDoc Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/Q/bankaccount.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="../Object.html">Object</a>
  
</nav>

    <!-- Included Modules -->
<nav id="includes-section" class="section">
  <h3 class="section-header">Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="../Q.html">Q</a>
  
  
  </ul>
</nav>

    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-i-bic-3D">#bic=</a>
    
    <li><a href="#method-i-blz-3D">#blz=</a>
    
    <li><a href="#method-i-iban-3D">#iban=</a>
    
    <li><a href="#method-i-knr-3D">#knr=</a>
    
    <li><a href="#method-i-onInvalidate">#onInvalidate</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../Gemfile.html">Gemfile</a>
  
    <li class="file"><a href="../LICENSE_txt.html">LICENSE</a>
  
    <li class="file"><a href="../Rakefile.html">Rakefile</a>
  
    <li class="file"><a href="../update.html">update</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Q.html">Q</a>
  
    <li><a href="../Q/Address.html">Q::Address</a>
  
    <li><a href="../Q/BankAccount.html">Q::BankAccount</a>
  
    <li><a href="../Q/Console.html">Q::Console</a>
  
    <li><a href="../Q/FlagValue.html">Q::FlagValue</a>
  
    <li><a href="../Q/Phone.html">Q::Phone</a>
  
    <li><a href="../Q/Validator.html">Q::Validator</a>
  
    <li><a href="../FlagValue.html">FlagValue</a>
  
    <li><a href="../Object.html">Object</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Q::BankAccount</h1>

  <div id="description" class="description">
    
<p>bank billing and account information this class is used by users and firms</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <!-- Constants -->
    <section id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt id="MODE_IBANBIC">MODE_IBANBIC
        
        <dd class="description"><p>object representing IBAN/BIC type account</p>
        
      
        <dt id="MODE_INVALID">MODE_INVALID
        
        <dd class="description"><p>object un- or erroneous initialized</p>
        
      
        <dt id="MODE_KNRBLZ">MODE_KNRBLZ
        
        <dd class="description"><p>object representing KNR/BLZ type account</p>
        
      
      </dl>
    </section>
    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-bic" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">bic</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>IBAN/BIC is new format</p>
        
        </div>
      </div>
      
      <div id="attribute-i-blz" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">blz</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>BLZ/KNR is old german format</p>
        
        </div>
      </div>
      
      <div id="attribute-i-holder" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">holder</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>name of the account holder and institute</p>
        
        </div>
      </div>
      
      <div id="attribute-i-iban" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">iban</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>IBAN/BIC is new format</p>
        
        </div>
      </div>
      
      <div id="attribute-i-institute" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">institute</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>name of the account holder and institute</p>
        
        </div>
      </div>
      
      <div id="attribute-i-knr" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">knr</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>BLZ/KNR is old german format</p>
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(mode, ibanOrKnr, bicOrBlz, holder, institute)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>constructor, specify mode constant MODE_.. for account</p>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/Q/bankaccount.rb, line 23</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">ibanOrKnr</span>, <span class="ruby-identifier">bicOrBlz</span>, <span class="ruby-identifier">holder</span>, <span class="ruby-identifier">institute</span>)
  <span class="ruby-ivar">@mode</span> = <span class="ruby-identifier">mode</span>
  <span class="ruby-ivar">@validator</span> = <span class="ruby-constant">Validator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">method</span>(<span class="ruby-value">:onInvalidate</span>))
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">mode</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">MODE_KNRBLZ</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">blz</span>=<span class="ruby-identifier">bicOrBlz</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">knr</span>=<span class="ruby-identifier">ibanOrKnr</span>
    <span class="ruby-ivar">@bic</span>  = <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@iban</span> = <span class="ruby-keyword">nil</span>
  
  <span class="ruby-keyword">when</span> <span class="ruby-constant">MODE_IBANBIC</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">bic</span>=<span class="ruby-identifier">bicOrBlz</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">iban</span>=<span class="ruby-identifier">ibanOrKnr</span>
    <span class="ruby-ivar">@blz</span>  = <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@knr</span>  = <span class="ruby-keyword">nil</span>
  
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@validator</span>.<span class="ruby-identifier">invalidate</span>(<span class="ruby-identifier">t</span>(<span class="ruby-value">:bankaccount_unknown_mode</span>), [<span class="ruby-identifier">mode</span>])

  <span class="ruby-keyword">end</span>
  
  <span class="ruby-ivar">@holder</span> = <span class="ruby-identifier">holder</span>
  <span class="ruby-ivar">@institute</span> = <span class="ruby-identifier">institute</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-bic-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">bic=</span><span
            class="method-args">(b)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Set account to giveb BIC. According to ISO 9362 (<a
href="http://en.wikipedia.org/wiki/ISO_9362">en.wikipedia.org/wiki/ISO_9362</a>)
the BIC is composed of 8 or 11 alphanumeric uppercase latin chars.</p>
          

          
          <div class="method-source-code" id="bic-3D-source">
            <pre><span class="ruby-comment"># File lib/Q/bankaccount.rb, line 70</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">bic=</span>(<span class="ruby-identifier">b</span>)
  <span class="ruby-identifier">setB</span> = <span class="ruby-identifier">b</span>
  <span class="ruby-comment"># we accept separating whitespace but remove it</span>
  <span class="ruby-identifier">setB</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">%r\s+/</span>, <span class="ruby-string">''</span>)
  <span class="ruby-comment"># 8 char format is assumed to mean 'main office',</span>
  <span class="ruby-comment"># commonly denoted with XXX-padding</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">setB</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span>) <span class="ruby-keyword">then</span> <span class="ruby-identifier">setB</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'XXX'</span> <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">setB</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp">%r^[0-9A-Z]{11}$/</span>))
    <span class="ruby-ivar">@bic</span> = <span class="ruby-identifier">setB</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@validator</span>.<span class="ruby-identifier">invalidate</span>(<span class="ruby-identifier">t</span>(<span class="ruby-value">:bankaccount_inv_bic</span>), [<span class="ruby-identifier">b</span>, <span class="ruby-value">8</span>, <span class="ruby-value">11</span>]) 
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- bic-3D-source -->
          
        </div>

        

        
      </div><!-- bic-3D-method -->

    
      <div id="method-i-blz-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">blz=</span><span
            class="method-args">(b)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="blz-3D-source">
            <pre><span class="ruby-comment"># File lib/Q/bankaccount.rb, line 84</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">blz=</span>(<span class="ruby-identifier">b</span>)
  <span class="ruby-ivar">@blz</span>=<span class="ruby-identifier">b</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- blz-3D-source -->
          
        </div>

        

        
      </div><!-- blz-3D-method -->

    
      <div id="method-i-iban-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">iban=</span><span
            class="method-args">(i)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Set account to given IBAN. An IBAN consists of up to 34 uppercase
alphanumeric latin chars.</p>
          

          
          <div class="method-source-code" id="iban-3D-source">
            <pre><span class="ruby-comment"># File lib/Q/bankaccount.rb, line 55</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">iban=</span>(<span class="ruby-identifier">i</span>)
  <span class="ruby-identifier">setI</span> = <span class="ruby-identifier">i</span>
  <span class="ruby-comment"># we accept separating whitespace but remove it</span>
  <span class="ruby-identifier">setI</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">%r\s+/</span>, <span class="ruby-string">''</span>)
  <span class="ruby-keyword">unless</span> (<span class="ruby-identifier">setI</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp">%r^[0-9A-Z]{6,34}$/</span>))
    <span class="ruby-ivar">@validator</span>.<span class="ruby-identifier">invalidate</span>(<span class="ruby-identifier">t</span>(<span class="ruby-value">:bankaccount_inv_iban</span>), [<span class="ruby-identifier">i</span>, <span class="ruby-value">34</span>]) 
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Console</span>.<span class="ruby-identifier">nyi</span>(<span class="ruby-string">'check IBAN checksum'</span>)
  <span class="ruby-ivar">@iban</span> = <span class="ruby-identifier">setI</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- iban-3D-source -->
          
        </div>

        

        
      </div><!-- iban-3D-method -->

    
      <div id="method-i-knr-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">knr=</span><span
            class="method-args">(k)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="knr-3D-source">
            <pre><span class="ruby-comment"># File lib/Q/bankaccount.rb, line 88</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">knr=</span>(<span class="ruby-identifier">k</span>)
  <span class="ruby-ivar">@knr</span>=<span class="ruby-identifier">k</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- knr-3D-source -->
          
        </div>

        

        
      </div><!-- knr-3D-method -->

    
      <div id="method-i-onInvalidate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">onInvalidate</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>handler called if object has been invalidated</p>
          

          
          <div class="method-source-code" id="onInvalidate-source">
            <pre><span class="ruby-comment"># File lib/Q/bankaccount.rb, line 49</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">onInvalidate</span>()
  <span class="ruby-ivar">@mode</span> = <span class="ruby-constant">MODE_INVALID</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- onInvalidate-source -->
          
        </div>

        

        
      </div><!-- onInvalidate-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

